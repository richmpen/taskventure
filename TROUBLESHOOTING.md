# Устранение неполадок Taskventure

В этом документе собраны решения распространенных проблем, с которыми вы можете столкнуться при настройке и запуске проекта Taskventure.

## Ошибки кодировки в Windows

Если вы видите в консоли странные символы (например, `╨б╨║╤А╨╕╨┐╤В` вместо слова "Скрипт"), это связано с проблемой кодировки в Windows:

### Решение:

1. Запустите командную строку от имени администратора
2. Выполните команду:
```
chcp 65001
```
3. Закройте и снова откройте командную строку
4. В файле batch-скрипта также должна быть эта команда (она уже добавлена в последнюю версию скрипта)

## Ошибка "Cannot find module 'ajv/dist/compile/codegen'"

Эта ошибка возникает из-за несовместимости версий ajv и ajv-keywords, используемых в webpack.

### Решение:

1. Установите конкретную версию ajv:
```bash
npm install ajv@8.12.0 --legacy-peer-deps
```

2. Или используйте обновленный скрипт `reset-dependencies.bat` или `reset-dependencies.sh`, который уже включает эту установку.

## Ошибки с AnimatePresence

Если у вас возникают ошибки типа:
```
ERROR: 'AnimatePresence' cannot be used as a JSX component.
Its return type 'Element | undefined' is not a valid JSX element.
```

### Решение:

Обратитесь к файлу [AnimatePresence-fix.md](./AnimatePresence-fix.md) для подробных инструкций по исправлению.

## Ошибки npm audit (уязвимости)

Вы можете видеть предупреждения о уязвимостях при выполнении `npm install`:

```
8 vulnerabilities (2 moderate, 6 high)
```

### Решение:

Эти уязвимости находятся в зависимостях, которые используются только во время разработки и не влияют на безопасность вашего приложения. Для продакшн-сборки рекомендуется:

1. Создать файл `.npmrc` в корне проекта со следующим содержимым:
```
legacy-peer-deps=true
fund=false
audit=false
```

2. Или выполнить обновление зависимостей (это может привести к несовместимости):
```bash
npm audit fix --force
```

## Ошибки при запуске TypeScript (tsc --noEmit)

Если вы видите ошибки типизации при запуске TypeScript, особенно связанные с библиотеками:

### Решение:

1. Добавьте опцию `skipLibCheck: true` в tsconfig.json (она уже должна быть там)
2. Иногда помогает полная переустановка зависимостей:
```bash
rm -rf node_modules package-lock.json
npm install --legacy-peer-deps
```

## Проблемы с версиями Node.js и npm

Проект был протестирован с Node.js v16.x и npm v8.x.

### Решение:

1. Установите Node.js v16.x с официального сайта (LTS версию)
2. Если у вас несколько версий Node.js, используйте менеджер версий (nvm для Linux/macOS, nvm-windows для Windows)
3. Для установки конкретной версии npm:
```bash
npm install -g npm@8.19.3
``` 